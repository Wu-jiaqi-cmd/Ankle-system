<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>注册</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
</head>
<body class="p-4" style="max-width:400px;margin:auto;">
  <h3 class="mb-3">用户注册</h3>
  <label>用户名</label>
  <input id="u" class="form-control mb-2">
  <label>密码</label>
  <input id="p" type="password" class="form-control mb-2">
  <label>年龄</label>
  <input id="a" type="number" class="form-control mb-3" value="25">
  <button class="btn btn-success w-100" onclick="register()">立即注册</button>
  <div class="text-center mt-3">
    <a href="index.html" class="btn btn-sm btn-link">返回登录</a>
  </div>
  <pre id="msg" class="text-danger mt-2"></pre>
  <script>
    const API = 'http://localhost:5000';
    async function register(){
      if(!u.value||!p.value){ msg.textContent='用户名和密码不能为空'; return; }
      const res = await fetch(`${API}/register`,{
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body:JSON.stringify({u:u.value,p:p.value,a:a.value})
      }).then(r=>r.json());
      if(res.uid){ alert('注册成功！即将返回登录'); location.href='index.html'; }
      else{ msg.textContent='用户名已存在'; }
    }
  </script>
</body>
</html>
