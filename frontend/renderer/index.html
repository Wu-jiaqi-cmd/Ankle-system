<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>登录</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
</head>
<body class="p-4" style="max-width:400px;margin:auto;">
  <h3 class="mb-3">脚踝风险评估系统</h3>
  <label>用户名</label>
  <input id="u" class="form-control mb-2">
  <label>密码</label>
  <input id="p" type="password" class="form-control mb-3">
  <button class="btn btn-primary w-100" onclick="login()">登录</button>
  <div class="text-center mt-3">
    <a href="register.html" class="btn btn-sm btn-link">没有账号？点击注册</a>
  </div>
  <pre id="msg" class="text-danger mt-2"></pre>
  <script>
    const API = 'http://localhost:5000';
    async function login(){
      const res = await fetch(`${API}/login`,{
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body:JSON.stringify({u:u.value,p:p.value})
      }).then(r=>r.json());
      if(res.uid){ localStorage.uid = res.uid; location.href = 'dashboard.html'; }
      else{ msg.textContent = '用户名或密码错误'; }
    }
  </script>
</body>
</html>
